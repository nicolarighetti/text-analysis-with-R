<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.269">

  <title>Text Analysis With R - Advanced techniques in text analysis with R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Advanced techniques in text analysis with R</h1>

<div class="quarto-title-authors">
</div>

</section>
<section>
<section id="unsupervised-text-classification-methods" class="title-slide slide level1 center" data-background-color="#2780e3">
<h1>Unsupervised text classification methods</h1>
<div class="cell">

</div>
</section>
<section id="classification" class="slide level2">
<h2>Classification</h2>
<p><strong>Classification</strong> is a key aspect of both human and machine intelligence. <strong>Sentiment analysis</strong>, which involves identifying the positive or negative orientation expressed by an author towards a certain object, is a common example of text classification task. For example, a movie, book or product review on the internet conveys the author’s sentiment towards it, while an editorial or political article conveys sentiment towards a political candidate or action. The simplest form of classification is a <strong>binary</strong> classification task, such as determining if a text is positive or negative or if it is political or non-political.</p>
</section>
<section id="clustering" class="slide level2">
<h2>Clustering</h2>
<p>Clustering algorithms are unsupervised classification models used to group documents into categories. Clustering involves the use of <strong>similarity and dissimilarity measures</strong> to determine the subgroups within a set of observations. The labeling of these subgroups is then left up to the researcher. A widely used measure is Euclidean distance, the square root of the sum of the squared differences between the two vectors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">0</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">sqrt</span>((<span class="dv">1-3</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> (<span class="dv">2-0</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> (<span class="dv">4-5</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> (<span class="dv">0-6</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.708204</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">dist</span>(<span class="fu">rbind</span>(v1,v2), <span class="at">method =</span> <span class="st">"euclidean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         v1
v2 6.708204</code></pre>
</div>
</div>
</section>
<section id="single-membership-and-mixed-membership-models" class="slide level2">
<h2>Single membership and mixed membership models</h2>
<p><strong>Single membership model</strong> and <strong>mixed</strong> membership models can be distinguished. In the case of a single membership model, it is assumed that each document belongs to only one category. This can be a restrictive assumption in many instances as a document may contain information about multiple categories. To address this, mixed membership models (also known as <strong>topic models</strong>) acknowledge that a document can be composed of a mixture of categories or topics.</p>
</section>
<section id="hierarchical-clustering" class="slide level2">
<h2>Hierarchical clustering</h2>
<p><strong>Hierarchical clustering</strong> is a common type of clustering that groups or splits data points based on a chosen distance measure. The grouping process is sequential and results in a <strong>dendrogram</strong>, which visually displays the separation between the groups.</p>
<div class="cell">

</div>
</section>
<section class="slide level2">


<img data-src="day3_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch"><div class="cell">

</div>
</section></section>
<section>
<section id="text-scaling" class="title-slide slide level1 center">
<h1>Text scaling</h1>

</section>
<section id="manifest-and-latent-characteristics" class="slide level2">
<h2>Manifest and latent characteristics</h2>
<p>Textual analysis can focus on manifest or latent characteristics. Manifest characteristics can be <strong>observed</strong> in the text. Latent ones, can only be indirectly observed. For example, racist language used by a political speaker is directly manifest in the text, and the importance is whether it was used, not what it represents.</p>
</section>
<section class="slide level2">

<p>Dimensions like ideology, on the contrary, cannot be directly observed but they have an effect on the way the text has been generated, for example influencing concepts and word choice. The dimension itself cannot be observed, only its effects. However, can be estimated based on these observable effects. The goal of scaling methods is to use observable outcomes, like words, to infer an actor’s position on a latent dimension, like ideology or policy preferences.</p>
</section>
<section id="wordscores" class="slide level2">
<h2>Wordscores</h2>
<p>Wordscores is a <strong>supervised</strong> text scaling method introduced in Laver, Benoit, and Garry (2003)<sup>1</sup> and widely used among political scientists.</p>
<p>Researchers first identify <strong>reference texts</strong> known to represent the extremes of the political space (and possibly the center as well). This one-dimensional space is anchored by assigning reference values to the reference texts, ideally obtained from previous expert survey.</p>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Laver, Michael, Kenneth Benoit, and John Garry. 2003. <a href="https://www.cambridge.org/core/journals/american-political-science-review/article/abs/extracting-policy-positions-from-political-texts-using-words-as-data/4F4676E80A79E01EAAB88EF3F2D1B733">Extracting Policy Positions from Political Texts Using Words as Data.</a>American Political Science Review 97(2): 311–32.</p></li></ol></aside></section>
<section class="slide level2">

<p>Wordscore estimates document positions of new texts by comparing them to these set of <strong>reference texts</strong>. The dimension of reference texts is defined by the analyst. It can derive, for example, from quantitive estimates made by experts. Wordscore then estimates the position of the new texts by <strong>comparing their words</strong> to the words of the reference texts.</p>
<p>Wordscores then counts the number of times each word occurs in the reference texts and compares these counts to word counts from the texts being analyzed. The manifestos are placed on a continuum between the refer- ence texts depending on how similar the word counts are to each reference text</p>
</section>
<section class="slide level2">

<p>Wordscores uses probabilities to infer the positions of new texts on a known dimension. The estimated position of a new text is updated as reference’s words are found. Its logic is similar to that of machine learning algorithms.</p>
<p>Benoit exemplifies the Wordscores implementation in Quanteda by using manifestos of the 2013 and 2017 German federal elections. The <code>ref_score</code> variable includes reference scores for 2013 German parties from the 2014 <a href="https://www.chesdata.eu">Chapel Hill Expert Survey</a>, which estimate party positioning on ideology and policy issues. The problem is to measure the position of 2017 manifestos based on the 2013 data.</p>
</section>
<section class="slide level2">

<p>Wordscores is applied to the document-feature matrix.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>tmod_ws <span class="ot">&lt;-</span> <span class="fu">textmodel_wordscores</span>(dfmat_ger, </span>
<span id="cb5-2"><a href="#cb5-2"></a>                                <span class="at">y =</span> corp_ger<span class="sc">$</span>ref_score, </span>
<span id="cb5-3"><a href="#cb5-3"></a>                                <span class="at">smooth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The plot shows estimated word positions in the reference text, where word frequencies are on the y-axis and word-score are on the x-axis.</p>

<img data-src="day3_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>We predict the Wordscores for the other texts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>pred_ws <span class="ot">&lt;-</span> <span class="fu">predict</span>(tmod_ws, </span>
<span id="cb6-2"><a href="#cb6-2"></a>                   <span class="at">se.fit =</span> <span class="cn">TRUE</span>, </span>
<span id="cb6-3"><a href="#cb6-3"></a>                   <span class="at">newdata =</span> dfmat_ger)</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">textplot_scale1d</span>(pred_ws)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="day3_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">


<img data-src="day3_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="step-by-step-explanation" class="slide level2">
<h2>Step by step explanation</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "politics lemma euro lemma random"          
[2] "politics lemma politics lemma words words" 
[3] "euro euro lemma euro politics words random"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  3 NA</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>Get the relative frequency of words in each text. The term “lemma” has frequency 0.4 because it appears in 2 out of 5 tokens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>refTexts_prop <span class="ot">&lt;-</span> <span class="fu">dfm_weight</span>(texts_dfm[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,] , <span class="st">"prop"</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>refTexts_prop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 2 documents, 5 features (30.00% sparse) and 0 docvars.
       features
docs     politics     lemma euro random     words
  text1 0.2000000 0.4000000  0.2    0.2 0        
  text2 0.3333333 0.3333333  0      0   0.3333333</code></pre>
</div>
</div>
<p>We can now calculate the probability of reading the first text given that we read, for example, the word “politics”: <span class="math inline">\(0.2/(0.2+0.3333333) = 0.375\)</span>. This is done for every word in the reference texts.</p>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>refTexts_prop <span class="ot">&lt;-</span> <span class="fu">t</span>(refTexts_prop)</span>
<span id="cb11-2"><a href="#cb11-2"></a>refTexts_prob <span class="ot">&lt;-</span> refTexts_prop<span class="sc">/</span><span class="fu">rowSums</span>(refTexts_prop)</span>
<span id="cb11-3"><a href="#cb11-3"></a>refTexts_prob</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 5 documents, 2 features (30.00% sparse) and 0 docvars.
          features
docs           text1     text2
  politics 0.3750000 0.6250000
  lemma    0.5454545 0.4545455
  euro     1.0000000 0        
  random   1.0000000 0        
  words    0         1.0000000</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>The resulting probabilities are weighted by the reference score to get the word scores (e.g., <span class="math inline">\(ws_{politics} = (0.3750000*2) + (0.6250000*3) = 2.625\)</span>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>ws <span class="ot">&lt;-</span> refTexts_prob <span class="sc">%*%</span> refscores[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">t</span>(ws)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 x 5 Matrix of class "dgeMatrix"
     politics    lemma euro random words
[1,]    2.625 2.454545    2      2     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>ws_quanteda <span class="ot">&lt;-</span> <span class="fu">textmodel_wordscores</span>(texts_dfm, refscores)</span>
<span id="cb15-2"><a href="#cb15-2"></a>ws_quanteda<span class="sc">$</span>wordscores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>politics    lemma     euro   random    words 
2.625000 2.454545 2.000000 2.000000 3.000000 </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>The score of the new text is the relative frequency of its words weighted by their word scores:</p>
<p><span class="math display">\[0.1428571*2.625000 + \\ 0.1428571*2.454545 + \\0.4285714*2.000000 +\\ 0.1428571*2.000000 + \\0.1428571*3.000000 =\\ 2.297078 \]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>virgTexts_prop <span class="ot">&lt;-</span> <span class="fu">dfm_weight</span>(texts_dfm[<span class="dv">3</span>,] , <span class="st">"prop"</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a>virgTexts_prop <span class="ot">&lt;-</span> <span class="fu">t</span>(virgTexts_prop)</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="fu">sum</span>(virgTexts_prop <span class="sc">*</span> ws)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.297078</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">predict</span>(ws_quanteda, <span class="at">newdata =</span> texts_dfm[<span class="dv">3</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   text3 
2.297078 </code></pre>
</div>
</div>
</section>
<section id="wordfish" class="slide level2">
<h2>Wordfish</h2>
<p>Wordfish is a scaling model of one-dimensional document positions<sup>1</sup> which does not require reference scores/texts. In comparison to Wordscores, it is an <strong>unsupervised</strong> <strong>one-dimensional text scaling</strong> <strong>method</strong> that it estimates the positions of documents solely based on the observed word frequencies.</p>
<aside><ol class="aside-footnotes"><li id="fn2"><p>Slapin, Jonathan and Sven-Oliver Proksch. 2008. “<a href="https://doi.org/10.1111/j.1540-5907.2008.00338.x">A Scaling Model for Estimating Time-Series Party Positions from Texts</a>.” <em>American Journal of Political Science</em> 52(3): 705-772.</p></li></ol></aside></section>
<section class="slide level2">

<p>In their seminal paper where they proposed the WORDFISH scaling algorithm, Slapin &amp; Proksch (2008) estimated <em>the positions of German political parties from 1990 to 2005 using word frequencies in party manifestos. The extracted positions reflect changes in the party system more accurately than existing time-series estimates. In addition, the method allows researchers to examine which words are important for placing parties on the left and on the right. We find that words with strong political connotations are the best discriminators between parties.</em></p>
</section>
<section class="slide level2">

<p>Speeches and document-level variables from the debate over the Irish budget of 2010.</p>
<p>The corpus object for the 2010 budget speeches, with document-level variables for year, debate, serial number, first and last name of the speaker, and the speaker’s party. A detailed explanation of Wordfish can be found <a href="http://www.luigicurini.com/uploads/6/7/9/8/67985527/lecture_3_2022.pdf">here</a>.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>tmod_wf <span class="ot">&lt;-</span> <span class="fu">textmodel_wordfish</span>(dfmat_irish, <span class="at">dir =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="day3_files/figure-revealjs/unnamed-chunk-19-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="correspondence-analysis" class="title-slide slide level1 center">
<h1>Correspondence analysis</h1>
<p>Correspondence analysis is a technique to scale documents on one or (usually) two or more dimensions. It is similar to principal component analysis but works for categorical variables (contingency table).</p>
<p>The objective of Correspondence Analysis (CA) is to simplify a data matrix by <strong>reducing its dimensionality</strong> and <strong>displaying it in a lower dimensional space</strong>, similar to Principal Component Analysis.</p>
</section>
<section id="model-fitting" class="slide level2">
<h2>Model fitting</h2>
<p>After the usual pre-processing steps, a CA model can be fitted using the Quanteda <code>textmodel_ca</code> function, optimized for large scale textual data<sup>1</sup>. An even more flexible library to fit CA models (and not only) is <a href="http://factominer.free.fr">FactoMineR</a>.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>ukimmig2010_ca <span class="ot">&lt;-</span> <span class="fu">textmodel_ca</span>(ukimmig2010_dfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside><ol class="aside-footnotes"><li id="fn3"><p>the function documentation also describes specifics solutions in case of very big <code>dfm</code></p></li></ol></aside></section>
<section id="visualization" class="slide level2">
<h2>Visualization</h2>
<p>The resulting model can be represented on a one-dimensional or bi-dimensional scale.</p>

<img data-src="day3_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">


<img data-src="day3_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">


<img data-src="day3_files/figure-revealjs/unnamed-chunk-24-1.png" width="960" class="r-stretch"></section>
<section id="choice-of-dimensions" class="slide level2">
<h2>Choice of dimensions</h2>
<p>CA models extract several dimensions from the data. Retain for interpretation the dimensions that cumulative explain most of the variance is common choice. Simple formulas have also been suggested in literature to select only the significant axes, defined as those whose explained variance is higher what would be expected by chance: <span class="math inline">\(max(\frac{100}{N_{row}}, \frac{100}{N_{col}})\)</span>)<sup>1</sup>.</p>
<aside><ol class="aside-footnotes"><li id="fn4"><p>Bendixen, M. (1996). <a href="http://www.mindware-jp.com/xlstat/jp/file/corres3.pdf">A practical guide to the use of correspondence analysis in marketing research.</a> Marketing Research On-Line, 1(1), 16-36, pag. 26.</p></li></ol></aside></section>
<section class="slide level2">

<div class="cell">

<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)</code></pre>
</div>
</div>
<img data-src="day3_files/figure-revealjs/unnamed-chunk-25-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<h3 id="interpretation">Interpretation</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                 Dim1       Dim2       Dim3
immigrants -1.4757253 1.09261013  0.5362865
uk         -1.3571230 0.01572683 -0.4667974
illegal    -1.2923156 0.69105066  0.6747134
british    -1.2849680 0.17789721  1.1576895
national   -0.8665846 0.29604152  0.7113248</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              Dim1       Dim2        Dim3
migrants  1.474483 -0.3799395 -0.79485323
system    1.718433  0.5760113  1.02632056
economy   1.907573 -1.0411265  0.27259065
end       1.950402  0.3008484  0.05516631
detention 2.539934  2.2957806 -2.30526219</code></pre>
</div>
</div>
</section>
<section id="step-by-step-explanation-1" class="slide level2">
<h2>Step by step explanation</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                     Category of readership
Level of education    Glance Fairly carefully Very carefully
  Some primary             5                7              2
  Primary completed       18               46             20
  Some secondary          19               29             39
  Secondary completed     12               40             49
  Some tertiary            3                7             16</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>Sum up all the values in the table and get the proportions</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                     Category of readership
Level of education         Glance Fairly carefully Very carefully
  Some primary        0.016025641       0.02243590    0.006410256
  Primary completed   0.057692308       0.14743590    0.064102564
  Some secondary      0.060897436       0.09294872    0.125000000
  Secondary completed 0.038461538       0.12820513    0.157051282
  Some tertiary       0.009615385       0.02243590    0.051282051</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>Get the sum of columns and rows. Glance describe the reading habits of 18.3% of the sample and some primary education is held by 4.5% of the sample.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>          Glance Fairly carefully   Very carefully 
       0.1826923        0.4134615        0.4038462 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>       Some primary   Primary completed      Some secondary Secondary completed 
         0.04487179          0.26923077          0.27884615          0.32371795 
      Some tertiary 
         0.08333333 </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>Referring back to the original table of proportions, 1.6% of people glanced and had some primary education. Is this number big or small? We can compute the value that we would expected to see under the assumption that there is no relationship between education and readership. The proportion that glance at a newspaper is 18.2% and 4.5% have only Some primary education. Thus, if there is no relationship between education and readership, we would expect that 4.5% of 18.2% of people (i.e., 0.008 = 0.8%) have both glanced and have primary education.</p>
</section>
<section class="slide level2">

<p>To get the expected values, we multiply each of the row totals (“row masses”) by each of the column totals (“column masses”).</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                         Glance Fairly carefully Very carefully
Some primary        0.008197732       0.01855276     0.01812130
Primary completed   0.049186391       0.11131657     0.10872781
Some secondary      0.050943047       0.11529216     0.11261095
Secondary completed 0.059140779       0.13384492     0.13073225
Some tertiary       0.015224359       0.03445513     0.03365385</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>We compute the residuals by subtracting the expected proportions from the observed proportions. The residuals quantify the difference between the observed data and the data we would expect under the assumption that there is no relationship between the row and column categories of the table (i.e., education and readership, in our example). The biggest residual is -0.045 for Primary completed and Very thorough.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                     Category of readership
Level of education          Glance Fairly carefully Very carefully
  Some primary         0.007827909      0.003883136    -0.01171105
  Primary completed    0.008505917      0.036119329    -0.04462525
  Some secondary       0.009954389     -0.022343442     0.01238905
  Secondary completed -0.020679241     -0.005639793     0.02631903
  Some tertiary       -0.005608974     -0.012019231     0.01762821</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>By ignoring the number of people in each of the rows and columns, we end up being most likely to find results only in rows and columns with larger totals (masses). We can solve for this problem by dividing the residuals by the expected values, which gives us a table of indexed residuals (I). The indexed residuals have a straightforward interpretation. The further the value from the table, the larger the observed proportion relative to the expected proportion.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                     Category of readership
Level of education        Glance Fairly carefully Very carefully
  Some primary         0.9548872       0.20930233     -0.6462585
  Primary completed    0.1729323       0.32447398     -0.4104308
  Some secondary       0.1954023      -0.19379845      0.1100164
  Secondary completed -0.3496613      -0.04213677      0.2013201
  Some tertiary       -0.3684211      -0.34883721      0.5238095</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>The biggest value on the table is the .95 for Some primary and Glance. This tells us that people with some primary education are almost twice as likely to Glance at a newspaper as we would expect if there were no relationship between education and reading. Reading along this first row, we see that there is a weaker, but positive, indexed residual of 0.21 for Fairly thorough and Some primary. This tells us that people with some primary education were 21% more likely to be fairly thorough readers that we would expect.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                     Category of readership
Level of education        Glance Fairly carefully Very carefully
  Some primary         0.9548872       0.20930233     -0.6462585
  Primary completed    0.1729323       0.32447398     -0.4104308
  Some secondary       0.1954023      -0.19379845      0.1100164
  Secondary completed -0.3496613      -0.04213677      0.2013201
  Some tertiary       -0.3684211      -0.34883721      0.5238095</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>The further the point is from the origin, the stronger the associations between that point and the other points on the map. E.g., Glance is the one which is most discriminating in terms of the readership categories.</p>

<img data-src="day3_files/figure-revealjs/unnamed-chunk-34-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>Also, when you have a small angle from the lines connecting the points to the origin, the the association is relatively strong (i.e., a positive indexed residual). When there is a right angle there is no association (i.e., no residual). When there is a wide angle, a negative residual is the outcome.</p>

<img data-src="day3_files/figure-revealjs/unnamed-chunk-35-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>People with only Primary completed are relatively unlikely to be Very carefully Those with Some primary are more likely to Glance. People with Primary completed are more likely to be Fairly thorough. The more education somebody has, the more likely they are to be Very thorough</p>

<img data-src="day3_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

</section></section>
<section>
<section id="supervised-classification-methods" class="title-slide slide level1 center">
<h1>Supervised classification methods</h1>

</section>
<section id="naive-bayes" class="slide level2">
<h2>Naive Bayes</h2>
<p>Naive Bayes is a machine learning approach for categorizing documents into <strong>various groups</strong> (two or more) through a supervised learning process. The classifier is <strong>trained</strong> using previously labeled documents, and is then used to predict the most probable category for new, unlabeled documents.</p>
<p>Quanteda offers a quick way to fit Naive Bayes models. Let’s follow the built-in example.</p>
</section>
<section class="slide level2">

<p>The <code>data_corpus_moviereviews</code> from the <code>quanteda.textmodels</code> package includes <strong>2000 movie reviews</strong> that have been classified either as “positive” or “negative” (variable “<strong>Sentiment</strong>”).</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Corpus consisting of 2000 documents, showing 5 documents:

            Text Types Tokens Sentences sentiment   id1   id2
 cv000_29416.txt   354    841         9       neg cv000 29416
 cv001_19502.txt   156    278         1       neg cv001 19502
 cv002_17424.txt   276    553         3       neg cv002 17424
 cv003_12683.txt   313    555         2       neg cv003 12683
 cv004_12641.txt   380    841         2       neg cv004 12641</code></pre>
</div>
</div>
</section>
<section id="validation" class="slide level2">
<h2>Validation</h2>
<p>In supervised machine learning, there is always a training and evaluation stage where the performance of the model is assessed. There are various evaluation techniques, the most basic of which involves dividing the labeled data into a training and test set.</p>
</section>
<section class="slide level2">

<p>For this demonstration, we randomly select 1500 reviews (75% of the labeled data) to be used as the training set, and the remaining 500 reviews (25%) will be the test set. Using the training set, we construct a Naive Bayes classifier. In the next step, we will use this classifier to predict the sentiment of the remaining reviews, which make up our test set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># create a random sample of 1500 numbers without replacement</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="fu">set.seed</span>(<span class="dv">300</span>)</span>
<span id="cb35-3"><a href="#cb35-3"></a>id_train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2000</span>, <span class="dv">1500</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="fu">head</span>(id_train, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  590  874 1602  985 1692  789  553 1980 1875 1705</code></pre>
</div>
</div>
</section>
<section id="training" class="slide level2">
<h2>Training</h2>
<p>We then create the usual Document Feature Matrix <code>dfm</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># create an ID for each item in the corpus</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>corp_movies<span class="sc">$</span>id_numeric <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ndoc</span>(corp_movies)</span>
<span id="cb37-3"><a href="#cb37-3"></a></span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="co"># tokenize and create the dfm</span></span>
<span id="cb37-5"><a href="#cb37-5"></a>toks_movies <span class="ot">&lt;-</span></span>
<span id="cb37-6"><a href="#cb37-6"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(corp_movies,</span>
<span id="cb37-7"><a href="#cb37-7"></a>         <span class="at">remove_punct =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-8"><a href="#cb37-8"></a>         <span class="at">remove_number =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-9"><a href="#cb37-9"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-10"><a href="#cb37-10"></a>  <span class="fu">tokens_wordstem</span>()</span>
<span id="cb37-11"><a href="#cb37-11"></a>dfmt_movie <span class="ot">&lt;-</span> <span class="fu">dfm</span>(toks_movies)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<p>We then create two <code>dfm</code> subset, one for the training and one for the test set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># subset the dfm, getting the training set</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>dfmat_training <span class="ot">&lt;-</span> <span class="fu">dfm_subset</span>(dfmt_movie, id_numeric <span class="sc">%in%</span> id_train)</span>
<span id="cb38-3"><a href="#cb38-3"></a></span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="co"># subset the dfm, getting the test set (documents not in id_train)</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>dfmat_test <span class="ot">&lt;-</span> <span class="fu">dfm_subset</span>(dfmt_movie, <span class="sc">!</span>id_numeric <span class="sc">%in%</span> id_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Naive Bayes can consider only features that appear in both the training and test sets. Hence, we need to make the features identical using <code>dfm_match</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>dfmat_matched <span class="ot">&lt;-</span> <span class="fu">dfm_match</span>(dfmat_test, </span>
<span id="cb39-2"><a href="#cb39-2"></a>                           <span class="at">features =</span> <span class="fu">featnames</span>(dfmat_training))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fit-the-model" class="slide level2">
<h2>Fit the model</h2>
<p>We now train the naive Bayes classifier using the Quanteda function <code>textmodel_nb()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>tmod_nb <span class="ot">&lt;-</span> <span class="fu">textmodel_nb</span>(</span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="co"># the dfm on which the model will be fit</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>  dfmat_training, </span>
<span id="cb40-4"><a href="#cb40-4"></a>  <span class="co"># training labels associated with each document in train. </span></span>
<span id="cb40-5"><a href="#cb40-5"></a>  dfmat_training<span class="sc">$</span>sentiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We now use the trained Naive Bayes model to predict the labels of the test set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># get labels from the test set</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>actual_class <span class="ot">&lt;-</span> dfmat_matched<span class="sc">$</span>sentiment</span>
<span id="cb41-3"><a href="#cb41-3"></a></span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="co"># predict the test set classes using the model</span></span>
<span id="cb41-5"><a href="#cb41-5"></a>predicted_class <span class="ot">&lt;-</span> <span class="fu">predict</span>(tmod_nb, <span class="at">newdata =</span> dfmat_matched)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<p>The cross-table reveals that there are equal numbers of false positives and false negatives, indicating that the classifier made mistakes in both directions without consistently over- or under-estimating either class.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>            predicted_class
actual_class neg pos
         neg 213  45
         pos  37 205</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>            predicted_class
actual_class       neg       pos
         neg 0.8255814 0.1744186
         pos 0.1528926 0.8471074</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>The function <code>confusionMatrix()</code> from the <code>caret</code> package to assess the performance of the classification.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

            predicted_class
actual_class neg pos
         neg 213  45
         pos  37 205
                                          
               Accuracy : 0.836           
                 95% CI : (0.8006, 0.8674)
    No Information Rate : 0.5             
    P-Value [Acc &gt; NIR] : &lt;2e-16          
                                          
                  Kappa : 0.672           
                                          
 Mcnemar's Test P-Value : 0.4395          
                                          
            Sensitivity : 0.8200          
            Specificity : 0.8520          
         Pos Pred Value : 0.8471          
         Neg Pred Value : 0.8256          
              Precision : 0.8471          
                 Recall : 0.8200          
                     F1 : 0.8333          
             Prevalence : 0.5000          
         Detection Rate : 0.4100          
   Detection Prevalence : 0.4840          
      Balanced Accuracy : 0.8360          
                                          
       'Positive' Class : pos             
                                          </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p><strong>Precision</strong>, <strong>recall</strong> and the <strong>F1</strong> score are frequently used to assess the classification performance.</p>
<p>Precision is <code>TP / (TP + FP)</code>, where <code>TP</code> are the number of true positives and <code>FP</code> are the false positives. Recall divides the true positives by the sum of true positives and false negatives <code>TP / (TP + FN)</code>. Finally, the F1 score is a harmonic mean of precision and recall <code>2 * (Precision * Recall) / (Precision + Recall)</code>.</p>
</section></section>
<section>
<section id="readme2" class="title-slide slide level1 center">
<h1>ReadMe2</h1>
<p>The originary ReadMe algorithm has been developed by <a href="https://gking.harvard.edu/files/gking/files/words.pdf">Hopkins &amp; King (2010)</a> to estimate the proportion of unlabeled documents within given categories starting from a categorization scheme chosen by the user (e.g., sentiment ratings, policy topics, or any other mutually exclusive and exhaustive set of categories) and a small subset of text documents hand classified into the given categories.</p>
</section>
<section class="slide level2">

<blockquote>
<p>The central intuition of the original <code>readme</code> is that for any individual feature <em>S</em> in both the labeled and unlabeled set, we know that the average value of that feature <em>S</em> is equal to the sum of the conditional expectation of <em>S</em> in each category multiplied by the share of documents in that category. While we observe the average of <em>S</em> in the unlabeled set, we do not observe the conditional expectations of <em>S</em>. We estimate these conditional expectations using the labeled set conditional frequency and solve for the unlabeled set proportions via standard linear programming methods.</p>
</blockquote>
</section>
<section class="slide level2">

<blockquote>
<p>There are many possible features <em>S</em> that can be extracted from the text. The main contribution of <code>readme2</code> is to develop a way for selecting optimal sets of features from a large space of potential document summaries, morphing the space in which the readme regression is run to yield the best possible estimates of the category proportions. We begin by converting each document into a vector of summaries based on the word vector representations of each term in the document<sup>1</sup>.</p>
</blockquote>
<aside><ol class="aside-footnotes"><li id="fn5"><p>https://github.com/iqss-research/readme-software</p></li></ol></aside></section>
<section class="slide level2">

<p>ReadMe2 is a recent and improved version of the algorithm by Jerzak, King, &amp; Strezhnev (2018). It uses pre-trained dictionaries of word vectors as part of the process of translating the words in documents to a numerical representation.</p>
<p>To work with package, a Python installation as well as several additional packages (and downloads) are required, such as <code>tensorflow</code>, an R interface to <a href="https://tensorflow.rstudio.com">TensorFlow API</a>, an open source machine learning library; the pre-trained dataset <a href="https://nlp.stanford.edu/projects/glove/">Stanford GloVe: Global Vectors for Word Representation</a>; a neural network transformer models via the <a href="https://www.r-text.org"><code>text</code> package</a>.</p>
<div class="cell">

</div>
</section>
<section class="slide level2">

<p>In the provided <a href="https://github.com/iqss-research/readme-software">example</a>, the Clinton dataset of blog posts was used to demonstrate the method. It consists of 1,676 documents categorized into 6 mutually exclusive categories (“TRUTH”).</p>
<div class="cell">

</div>
<p>The <code>undergrad</code> function takes the raw document texts and a word vector dictionary as input and convert the raw text into a document-feature matrix. The default word vector used is the Stanford GloVe pre-trained dataset. The <code>undergrad</code> function returns a set of feature summaries for each document after pre-processing the text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="do">## Generate a word vector summary for each document</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>wordVec_summaries <span class="ot">&lt;-</span> <span class="fu">undergrad</span>(<span class="at">documentText =</span> <span class="fu">cleanme</span>(clinton<span class="sc">$</span>TEXT), </span>
<span id="cb45-3"><a href="#cb45-3"></a>                               <span class="at">wordVecs =</span> <span class="cn">NULL</span>) <span class="co"># NULL=default Stanford GloVe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<p>Recently (2023) a new option was added to obtain document-level features using neural network transformer models, such as GPT or BERT, using the textEmbed function from the text package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="do">## Generate a word vector summary for the first twenty documents</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>wordVec_summaries <span class="ot">&lt;-</span> <span class="fu">undergrad</span>(<span class="at">documentText =</span> <span class="fu">tolower</span>(clinton<span class="sc">$</span>TEXT),</span>
<span id="cb46-3"><a href="#cb46-3"></a>                              <span class="at">numericization_method =</span> <span class="st">"transformer_based"</span>) </span>
<span id="cb46-4"><a href="#cb46-4"></a>                            <span class="co"># "vector_summaries" # faster</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="estimate" class="slide level2">
<h2>Estimate</h2>
<p>Finally, the estimated proportions can be computed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># Estimate category proportions</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="fu">set.seed</span>(<span class="dv">2138</span>) <span class="co"># Set a seed if you choose</span></span>
<span id="cb47-3"><a href="#cb47-3"></a>readme.estimates <span class="ot">&lt;-</span> <span class="fu">readme</span>(<span class="at">dfm =</span> wordVec_summaries, </span>
<span id="cb47-4"><a href="#cb47-4"></a>                           <span class="at">labeledIndicator =</span> clinton<span class="sc">$</span>TRAININGSET, </span>
<span id="cb47-5"><a href="#cb47-5"></a>                           <span class="at">categoryVec =</span> clinton<span class="sc">$</span>TRUTH)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="validate" class="slide level2">
<h2>Validate</h2>
<p>The model can be validated against the actual categories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>res <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/ReadMe2_plotdata.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># Output proportions estimate</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>est <span class="ot">&lt;-</span> readme.estimates<span class="sc">$</span>point_readme</span>
<span id="cb49-3"><a href="#cb49-3"></a><span class="co"># Compare to the truth</span></span>
<span id="cb49-4"><a href="#cb49-4"></a>true <span class="ot">&lt;-</span></span>
<span id="cb49-5"><a href="#cb49-5"></a>  <span class="fu">table</span>(clinton<span class="sc">$</span>TRUTH[clinton<span class="sc">$</span>TRAININGSET <span class="sc">==</span> <span class="dv">0</span>]) <span class="sc">/</span> <span class="fu">sum</span>(<span class="fu">table</span>((clinton<span class="sc">$</span>TRUTH[clinton<span class="sc">$</span>TRAININGSET <span class="sc">==</span> <span class="dv">0</span>])))</span>
<span id="cb49-6"><a href="#cb49-6"></a></span>
<span id="cb49-7"><a href="#cb49-7"></a>res <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ESTIMATE =</span> <span class="fu">as.numeric</span>(est),</span>
<span id="cb49-8"><a href="#cb49-8"></a>                  <span class="at">REAL =</span> <span class="fu">as.numeric</span>(true))</span>
<span id="cb49-9"><a href="#cb49-9"></a><span class="fu">rownames</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"-2"</span>, <span class="st">"-1"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>)</span>
<span id="cb49-10"><a href="#cb49-10"></a>res <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">as.matrix</span>(res))</span>
<span id="cb49-11"><a href="#cb49-11"></a></span>
<span id="cb49-12"><a href="#cb49-12"></a><span class="fu">barplot</span>(</span>
<span id="cb49-13"><a href="#cb49-13"></a>  <span class="at">height =</span> res,</span>
<span id="cb49-14"><a href="#cb49-14"></a>  <span class="at">beside =</span> T,</span>
<span id="cb49-15"><a href="#cb49-15"></a>  <span class="at">legend.text =</span> <span class="fu">c</span>(<span class="st">"estimates"</span>, <span class="st">"real"</span>),</span>
<span id="cb49-16"><a href="#cb49-16"></a>  <span class="at">args.legend =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="st">"topleft"</span>)</span>
<span id="cb49-17"><a href="#cb49-17"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="named-entity-recognition" class="slide level2">
<h2>Named entity recognition</h2>
<p>Apache OpenNLP Maxent</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb50-2"><a href="#cb50-2"></a>page <span class="ot">=</span> <span class="fu">read_html</span>(<span class="st">'https://en.wikipedia.org/wiki/Berkshire_Hathaway'</span>)</span>
<span id="cb50-3"><a href="#cb50-3"></a></span>
<span id="cb50-4"><a href="#cb50-4"></a>text <span class="ot">=</span> <span class="fu">html_text</span>(<span class="fu">html_nodes</span>(page,<span class="st">'p'</span>))</span>
<span id="cb50-5"><a href="#cb50-5"></a>text <span class="ot">=</span> text[text <span class="sc">!=</span> <span class="st">""</span>]</span>
<span id="cb50-6"><a href="#cb50-6"></a>text <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[[0-9]]|</span><span class="sc">\\</span><span class="st">[[0-9][0-9]]|</span><span class="sc">\\</span><span class="st">[[0-9][0-9][0-9]]"</span>,<span class="st">""</span>,text) <span class="co"># removing refrences [101] type</span></span>
<span id="cb50-7"><a href="#cb50-7"></a></span>
<span id="cb50-8"><a href="#cb50-8"></a><span class="co"># Make one complete document</span></span>
<span id="cb50-9"><a href="#cb50-9"></a>text <span class="ot">=</span> <span class="fu">paste</span>(text, <span class="at">collapse =</span> <span class="st">" "</span>) </span>
<span id="cb50-10"><a href="#cb50-10"></a></span>
<span id="cb50-11"><a href="#cb50-11"></a>text <span class="ot">=</span> <span class="fu">as.String</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>sent_annot <span class="ot">=</span> <span class="fu">Maxent_Sent_Token_Annotator</span>()</span>
<span id="cb51-2"><a href="#cb51-2"></a>word_annot <span class="ot">=</span> <span class="fu">Maxent_Word_Token_Annotator</span>()</span>
<span id="cb51-3"><a href="#cb51-3"></a>people_annot <span class="ot">=</span> <span class="fu">Maxent_Entity_Annotator</span>(<span class="at">kind =</span> <span class="st">"person"</span>) <span class="co">#annotate person</span></span>
<span id="cb51-4"><a href="#cb51-4"></a>loc_annot <span class="ot">=</span> <span class="fu">Maxent_Entity_Annotator</span>(<span class="at">kind =</span> <span class="st">"location"</span>) <span class="co">#annotate location</span></span>
<span id="cb51-5"><a href="#cb51-5"></a></span>
<span id="cb51-6"><a href="#cb51-6"></a>annot.l1 <span class="ot">=</span> NLP<span class="sc">::</span><span class="fu">annotate</span>(text, <span class="fu">list</span>(sent_annot,word_annot,loc_annot,people_annot))</span>
<span id="cb51-7"><a href="#cb51-7"></a></span>
<span id="cb51-8"><a href="#cb51-8"></a>k <span class="ot">&lt;-</span> <span class="fu">sapply</span>(annot.l1<span class="sc">$</span>features, <span class="st">`</span><span class="at">[[</span><span class="st">`</span>, <span class="st">"kind"</span>)</span>
<span id="cb51-9"><a href="#cb51-9"></a>berk_locations <span class="ot">=</span> text[annot.l1[k <span class="sc">==</span> <span class="st">"location"</span>]]</span>
<span id="cb51-10"><a href="#cb51-10"></a>berk_people <span class="ot">=</span> text[annot.l1[k <span class="sc">==</span> <span class="st">"person"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Warren Buffett" "Charlie Munger" "Heinz Company"  "Oliver Chace"  
[5] "Samuel Slater" </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Omaha"                "Nebraska"             "United States"       
[4] "Valley Falls Company" "Valley Falls"        </code></pre>
</div>
</div>

<div class="footer footer-default">

</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>